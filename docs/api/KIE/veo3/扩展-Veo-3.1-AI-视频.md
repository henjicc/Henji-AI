# POST 扩展 Veo 3.1 AI 视频

使用 Veo3.1 API 对已有视频进行扩展，生成新的视频内容。此功能可以让您基于现有的视频片段，通过提示词描述来扩展视频的时长或内容。

我们的 **Veo 3.1 视频扩展 API** 不仅仅是简单的视频拼接。它在官方模型之上增加了智能扩展算法，为您提供更大的灵活性和显著更高的成功率——**仅为 Google 官方定价的 25%**（完整详情请参见 [积分详情](https://kie.ai/billing)）。

| 功能 | 详情 |
| :--- | :--- |
| **智能扩展** | 基于现有视频和提示词生成新的视频片段 |
| **无缝衔接** | 生成的扩展视频与原始视频自然衔接 |
| **灵活控制** | 通过提示词精确控制扩展内容的风格和动作 |
| **高质量输出** | 保持与原始视频相同的画质和风格 |
| **音频轨道** | 扩展视频默认带有背景音频，与原始视频保持一致 |

## 为什么我们的 Veo 3.1 视频扩展与众不同

1.  **智能内容理解** – 深度理解原始视频的内容和风格，确保扩展内容的连贯性。
2.  **自然过渡** – 扩展的视频片段与原始视频无缝衔接，看不出拼接痕迹。
3.  **灵活控制** – 通过详细的提示词精确控制扩展内容的动作、场景和风格。
4.  **显著的成本节省** – 我们的费率是 Google 直接 API 定价的 25%。

## 视频扩展工作流程

视频扩展功能基于您已有的 Veo3.1 生成视频，通过以下步骤实现：

1.  **提供原始视频**：使用原始视频生成任务的 `taskId`
2.  **描述扩展内容**：通过 `prompt` 详细描述您希望视频如何扩展
3.  **智能分析**：系统分析原始视频的内容、风格和动作
4.  **生成扩展**：基于分析结果和您的提示词生成新的视频片段
5.  **无缝衔接**：将扩展视频与原始视频自然连接

## 请求示例

### 请求

```bash
curl --request POST \
  --url https://api.kie.ai/api/v1/veo/extend \
  --header 'Authorization: Bearer <token>' \
  --header 'Content-Type: application/json' \
  --data '
{
  "taskId": "veo_task_abcdef123456",
  "prompt": "The dog continues running through the park, jumping over obstacles and playing with other dogs",
  "seeds": 12345,
  "watermark": "MyBrand",
  "callBackUrl": "https://your-callback-url.com/veo-extend-callback"
}
'
```

### 响应

```json
{
  "code": 200,
  "msg": "success",
  "data": {
    "taskId": "veo_extend_task_xyz789"
  }
}
```

## 请求参数

### 请求头

#### Authorization

*   **类型**: `string`
*   **位置**: `header`
*   **必需**: 是
*   **描述**: 所有 API 都需要通过 Bearer Token 进行认证。
    *   **获取 API Key**：访问 [API Key 管理页面](https://kie.ai/api-key) 获取您的 API Key。
    *   **使用方法**：添加到请求头：`Authorization: Bearer YOUR_API_KEY`
    *   **注意**：请妥善保管您的 API Key，不要与他人分享。如果您怀疑 API Key 已泄露，请立即在管理页面重置。

### 请求体 (application/json)

#### taskId

*   **类型**: `string`
*   **必需**: 是
*   **描述**: 原始视频生成任务的ID。必须是从视频生成接口返回的有效taskId。
*   **注意**：生成1080P之后的视频不能扩展。
*   **示例**: `"veo_task_abcdef123456"`

#### prompt

*   **类型**: `string`
*   **必需**: 是
*   **描述**: 描述扩展视频内容的文本提示词。应该详细描述您希望视频如何扩展，包括动作、场景变化、风格等。
*   **示例**: `"The dog continues running through the park, jumping over obstacles and playing with other dogs"`

#### seeds

*   **类型**: `integer`
*   **必需**: 否
*   **描述**: 随机种子参数，用于控制生成内容的随机性。取值范围为10000-99999。相同的种子会生成相似的视频内容，不同的种子会生成不同的视频内容。不填写时系统自动分配。
*   **取值范围**: `10000 <= x <= 99999`
*   **示例**: `12345`

#### watermark

*   **类型**: `string`
*   **必需**: 否
*   **描述**: 水印文本（可选）。如果提供，将在生成的视频上添加水印。
*   **示例**: `"MyBrand"`

#### callBackUrl

*   **类型**: `string`
*   **必需**: 否
*   **描述**: 任务完成时的回调URL（可选）。强烈推荐在生产环境中使用。
    *   系统将在视频扩展完成时向此URL发送POST请求，包含任务状态和结果。
    *   回调包含生成的视频URL、任务信息等内容。
    *   您的回调端点应能接受包含视频结果的JSON载荷的POST请求。
    *   详细的回调格式和实现指南，请参见 [视频生成回调](/cn/veo3-api/generate-veo-3-video-callbacks)。
    *   或者，您也可以使用[获取视频详情接口](/cn/veo3-api/get-veo-3-video-details)来轮询任务状态。
*   **示例**: `"https://your-callback-url.com/veo-extend-callback"`

## 响应参数

### code

*   **类型**: `integer`
*   **描述**: 响应状态码。
    *   `200`: 成功 - 扩展任务已创建
    *   `400`: 客户端错误 - 提示词违反内容政策或其他输入错误
    *   `401`: 未授权 - 认证凭据缺失或无效
    *   `402`: 积分不足 - 账户没有足够的积分执行操作
    *   `404`: 未找到 - 原始视频或任务不存在
    *   `422`: 验证错误 - 请求参数验证失败
    *   `429`: 请求限制 - 已超过该资源的请求限制
    *   `455`: 服务不可用 - 系统正在进行维护
    *   `500`: 服务器错误 - 处理请求时发生意外错误
    *   `501`: 扩展失败 - 视频扩展任务失败
    *   `505`: 功能禁用 - 请求的功能当前已禁用

### msg

*   **类型**: `string`
*   **描述**: 响应消息。
*   **示例**: `"success"`

### data

*   **类型**: `object`
*   **描述**: 响应数据。

#### data.taskId

*   **类型**: `string`
*   **描述**: 任务 ID，可用于获取视频详情接口查询任务状态。
*   **示例**: `"veo_extend_task_xyz789"`

## 最佳实践

### 提示词编写建议

1.  **详细描述动作**：明确描述您希望视频如何扩展，例如“狗继续在公园里奔跑，跳过障碍物”。
2.  **保持风格一致**：确保扩展内容的风格与原始视频保持一致。
3.  **自然过渡**：描述的动作应该与原始视频的结尾自然衔接。
4.  **使用英文**：建议使用英文提示词以获得最佳效果。
5.  **避免冲突**：确保扩展内容不会与原始视频产生逻辑冲突。

### 技术建议

1.  **使用回调**：在生产环境中强烈建议使用回调机制获取结果。
2.  **及时下载**：生成完成后及时下载视频文件，URL有时效性。
3.  **错误处理**：实现适当的错误处理和重试机制。
4.  **积分管理**：监控积分使用情况，确保有足够余额。
5.  **种子控制**：使用`seeds`参数控制生成内容的随机性。

## 注意事项

### 重要限制

*   **原始视频要求**：只能扩展通过Veo3.1 API生成的视频。
*   **内容政策**：扩展内容同样需要符合平台内容政策。
*   **积分消耗**：视频扩展会消耗积分，具体计费请查看 [积分详情](https://kie.ai/billing)。
*   **处理时间**：视频扩展可能需要几分钟到十几分钟的处理时间。
*   **URL有效期**：生成的视频URL有有效期限制，请及时下载保存。

### 扩展视频特性

*   **无缝衔接**：扩展的视频会与原始视频自然衔接。
*   **质量保持**：扩展视频保持与原始视频相同的画质。
*   **风格一致**：扩展内容会保持原始视频的视觉风格。
*   **灵活控制**：通过提示词可以精确控制扩展的内容和方向。

## 故障排查

### 常见错误处理

*   **404错误**：检查`task_id`和`media_id`是否正确。
*   **400错误**：检查提示词是否符合内容政策。
*   **402错误**：确认账户有足够的积分。
*   **500错误**：服务器临时问题，请稍后重试。

### 扩展质量问题

*   **衔接不自然**：尝试更详细的提示词描述。
*   **风格不一致**：确保提示词中包含了风格描述。
*   **动作不连贯**：检查提示词中的动作描述是否合理。
*   **内容偏差**：调整提示词以更准确地描述期望的扩展内容。

### 技术问题

*   **回调接收失败**：检查回调URL是否可访问。
*   **视频下载失败**：确认URL有效性和网络连接。
*   **任务状态异常**：使用详情查询接口检查任务状态。
*   **积分不足**：及时充值积分以继续使用服务。