# Wan 2.2 图生视频

Wan 2.2（万相 2.2）专业版图生视频模型根据首帧图像和文本，生成无声视频。在画面细节表现、运动稳定性方面均有显著提升。

本模型服务仅针对已完成 PPIO派欧云 平台企业认证的用户开放。具体请参见[实名认证](/docs/support/identity-verification)。

这是一个**异步**API，只会返回异步任务的 `task_id`。您应该使用该 `task_id` 请求 [查询任务结果 API](/docs/models/reference-get-async-task-result) 来检索视频生成结果。

## 请求头

### Content-Type
*   **类型**: `string`
*   **必需**: 是
*   **枚举值**: `application/json`

### Authorization
*   **类型**: `string`
*   **必需**: 是
*   **描述**: Bearer 身份验证格式，例如：`Bearer {{API 密钥}}`。

## 请求体

### input
*   **类型**: `object`
*   **必需**: 是
*   **描述**: 输入的基本信息，如提示词等。

**属性：**

*   **prompt**
    *   **类型**: `string`
    *   **描述**: 文本提示词。支持中英文，长度不超过800个字符，每个汉字/字母占一个字符，超过部分会自动截断。
    *   **示例值**: `一只小猫在草地上奔跑。`

*   **negative_prompt**
    *   **类型**: `string`
    *   **描述**: 反向提示词，用来描述不希望在视频画面中看到的内容，可以对视频画面进行限制。支持中英文，长度不超过500个字符，超过部分会自动截断。
    *   **示例值**: `低分辨率、错误、最差质量、低质量、残缺、多余的手指、比例不良等。`

*   **img_url**
    *   **类型**: `string`
    *   **必需**: 是
    *   **描述**: 生成视频时所使用的首帧图像的URL。URL 需为公网可访问地址，支持 HTTP 或 HTTPS 协议。
    *   **图像限制**：
        *   **图像格式**：JPEG、JPG、PNG（不支持透明通道）、BMP、WEBP。
        *   **图像分辨率**：图像的宽度和高度范围为[360, 2000]，单位为像素。
        *   **文件大小**：不超过10MB。

### parameters
*   **类型**: `object`
*   **必需**: 是
*   **描述**: 视频处理参数，如指定输出视频的分辨率、视频时长等。

**属性：**

*   **resolution**
    *   **类型**: `string`
    *   **必需**: 是
    *   **描述**: 生成视频的分辨率档位。
    *   **可选值**：`480P`、`1080P`。
    *   **示例值**: `1080P`。
    *   **说明**：模型会尽量保持输出视频与输入图像的宽高比一致，在宽高比不变的基础上，将视频总像素调整到所选档位附近。
        *   **480P**：视频分辨率通常指 640×480（约 31万像素），视频宽高比为4:3。
        *   **1080P**：视频分辨率通常指 1920×1080（约 207万像素），视频宽高比为16:9。
    *   **示例**：若输入图像的宽高比例为 4:5，且选择 480P 档位，则输出视频的宽高比会保持4:5，分辨率调整为接近 31万像素。例如，输出视频的分辨率可能为 480×600，总像素 28.8万（此数据仅做参考，以实际输出为准）。

*   **duration**
    *   **类型**: `integer`
    *   **描述**: 生成视频的时长，单位为秒。
    *   **默认值**: `5`（目前固定为5秒，且不支持修改）。
    *   **示例值**: `5`。

*   **prompt_extend**
    *   **类型**: `bool`
    *   **描述**: 是否开启prompt智能改写。开启后使用大模型对输入prompt进行智能改写。对于较短的prompt生成效果提升明显，但会增加耗时。
    *   **可选值**：
        *   `true`：默认值，开启智能改写。
        *   `false`：不开启智能改写。
    *   **示例值**: `true`。

*   **seed**
    *   **类型**: `integer`
    *   **描述**: 随机数种子，用于控制模型生成内容的随机性。取值范围为 `[0, 2147483647]`。如果不提供，则算法自动生成一个随机数作为种子。如果希望生成内容保持相对稳定，可以使用相同的seed参数值。
    *   **示例值**: `12345`。

*   **watermark**
    *   **类型**: `bool`
    *   **描述**: 是否添加水印标识，水印位于图片右下角，文案为“AI生成”。
    *   **可选值**：
        *   `false`：默认值，不添加水印。
        *   `true`：添加水印。

## 请求示例

```bash
curl --request POST \
  --url https://api.ppinfra.com/v3/async/wan-2.2-i2v \
  --header 'Authorization: Bearer <your-api-key>' \
  --header 'Content-Type: application/json' \
  --data '
{
  "input": {
    "prompt": "一只小猫在草地上奔跑。",
    "negative_prompt": "低分辨率、错误、最差质量。",
    "img_url": "https://example.com/first-frame.jpg"
  },
  "parameters": {
    "resolution": "1080P",
    "duration": 5,
    "prompt_extend": true,
    "seed": 12345,
    "watermark": false
  }
}
'
```

## 响应

### task_id
*   **类型**: `string`
*   **必需**: 是
*   **描述**: 异步任务的 task_id。您应该使用该 task_id 请求 [查询任务结果 API](/docs/models/reference-get-async-task-result) 以获取生成结果。

## 响应示例

```json
{
  "task_id": "your_task_id_here"
}
```